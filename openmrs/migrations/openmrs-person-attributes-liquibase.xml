<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!-- This Liquibase file is meant to contain person attributes and related Concepts -->
    <changeSet id="POSSIBLE-IMPL-PERSON-ATTRIBUTE-CASTE" author="tw">
        <comment>Add Caste concepts to person attribute caste</comment>
        <sql>
            set @concept_id = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            set @uuid = 0;
            set @currdate = 0;

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id, 'Caste', 'Caste', 'Coded', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Caste', 1);

            set @caste_concept_id = @concept_id;

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id, '1 - Dalit', '1 - Dalit', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, '1', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, '-', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Dalit', 1);
            call add_concept_answer(@caste_concept_id, @concept_id, 0);

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id, '2 - Janajati', '2 - Janajati', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, '2', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, '-', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Janajati', 1);
            call add_concept_answer(@caste_concept_id, @concept_id, 0);

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id, '3 - Madhesi', '3 - Madhesi', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, '3', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, '-', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Madhesi', 1);
            call add_concept_answer(@caste_concept_id, @concept_id, 0);

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id, '4 - Muslim', '4 - Muslim', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, '4', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, '-', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Muslim', 1);
            call add_concept_answer(@caste_concept_id, @concept_id, 0);

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id, '5 - Brahman/Chhetri', '5 - Brahman/Chhetri', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, '5', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, '-', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Brahman/Chhetri', 1);
            call add_concept_answer(@caste_concept_id, @concept_id, 0);

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id, '6 - Others', '6 - Others', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, '6', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, '-', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Other', 1);
            call add_concept_answer(@caste_concept_id, @concept_id, 0);

            select uuid() into @uuid;
            select now() into @currdate;
            INSERT INTO person_attribute_type (name, description, format, searchable, creator, foreign_key, date_created, retired, sort_weight, uuid)
            VALUES ('caste', 'Caste', 'org.openmrs.Concept', '1', 1, @caste_concept_id, @currdate, 0, 4, @uuid);

        </sql>
    </changeSet>
    <changeSet id="POSSIBLE-IMPL-PERSON-ATTRIBUTE-CONTACT-NUMBER" author="tw">
        <sql>
            set @uuid = 0;
            set @currdate = 0;

            select uuid() into @uuid;
            select now() into @currdate;

            INSERT INTO person_attribute_type (name, description, format, searchable, creator, date_created, retired, sort_weight, uuid)
            VALUES ('Contact Number', 'Phone Number', 'java.lang.String', '1', 1, @currdate, 0, 4, @uuid);
        </sql>
    </changeSet>
</databaseChangeLog>